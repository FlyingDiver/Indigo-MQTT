<?xml version="1.0"?>
<Devices>
	<SupportURL>http://forums.indigodomo.com/viewforum.php?f=316</SupportURL>
    <Device type="custom" id="mqttBroker">
        <Name>MQTT Broker</Name>
        <ConfigUI>  
            <Field id="subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="old_subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="published_devices" type="list" hidden="true"><List class="self" method="publishedDeviceList"/></Field>
            <Field id="published_variables" type="list" hidden="true"><List class="self" method="publishedVariableList"/></Field>
           
            <Field id="section" type="menu" defaultValue="connect">
                <Label>Section:</Label>
        		<List>
        			<Option value="connect">Connection Info</Option>
        			<Option value="subscriptions">Topic Subscriptions</Option>
        			<Option value="devices">Published Devices</Option>
        			<Option value="device_template">Device Publishing Template</Option>
        			<Option value="variables">Published Variables</Option>
        			<Option value="variable_template">Variable Publishing Template</Option>
        		</List>
        	</Field>
            <Field id="section_separator1" type="separator"/>

            <!--  This section for connection and login information for the Broker/server  -->

            <Field id="address" type="textfield"  defaultValue="localhost" visibleBindingId="section" visibleBindingValue="connect">
                <Label>IP Address or Hostname:</Label>
            </Field>
            <Field id="port" type="textfield" defaultValue="1883" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Port:</Label>
            </Field>
            <Field id="protocol" type="menu" defaultValue="4"  visibleBindingId="section" visibleBindingValue="connect">
        		<Label>MQTT Protocol:</Label>
        		<List>
        			<Option value="4">MQTTv311</Option>
        			<Option value="3">MQTTv31</Option>
        		</List>
        	</Field>
            <Field id="transport" type="menu" defaultValue="tcp"  visibleBindingId="section" visibleBindingValue="connect">
        		<Label>Transport Protocol:</Label>
        		<List>
        			<Option value="tcp">TCP</Option>
        			<Option value="websockets">WebSockets</Option>
        		</List>
        	</Field>
            <Field id="username" type="textfield"  visibleBindingId="section" visibleBindingValue="connect">
                <Label>Username:</Label>
            </Field>
            <Field id="password" type="textfield" secure="true" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Password:</Label>
            </Field>
            <Field id="useTLS" type="checkbox" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Use SSL/TLS:</Label>
            </Field>

            <!--  This section for managing topic subscriptions for this broker  -->

            <Field id="subscriptions_newTopic" type="textfield" visibleBindingId="section" visibleBindingValue="subscriptions" >
                <Label>Topic to subscribe:</Label>
            </Field>
        	<Field id="subscriptions_qos" type="menu" defaultValue="0" visibleBindingId="section" visibleBindingValue="subscriptions">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
            <Field id="subscriptions_addTopic" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Add Topic</Title>
                <CallbackMethod>addTopic</CallbackMethod>
            </Field>
            <Field id="subscriptions_separator1" type="separator" visibleBindingId="section" visibleBindingValue="subscriptions"/>
            <Field id="subscriptions_subscribedLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>This is the list of topics currently subscribed to for this broker.</Label>
            </Field>
           <Field id="subscriptions_items" type="list" rows="10" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>Subscribed Topics:</Label>
                <List class="self" method="subscribedList" dynamicReload="true"/>
            </Field>
            <Field id="subscriptions_deleteSubscriptions" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Delete Subscriptions</Title>
                <CallbackMethod>deleteSubscriptions</CallbackMethod>
            </Field>

            <!--  This section for managing device publishing to this broker  -->

            <Field id="devices_doExcludes" type="checkbox"  visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Exclude Devices</Label>
            </Field>
            <Field id="devices_excludeLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="devices">
                <Label>If checked the list of devices below will be excluded from publishing.  If not checked, ONLY the devices below will be published. </Label>
            </Field>
            <Field id="devices_separator1" type="separator" visibleBindingId="section" visibleBindingValue="devices"/>
            <Field id="deviceProtocol" type="menu" defaultValue="Insteon" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Select Plugin:</Label>
                <List method="getProtocolList" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
			<Field id="devices_deviceSelected" type="menu" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
				<Label>Device to Publish:</Label>
				<List method="getProtocolDevices" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="devices_addDevice" type="button" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label/>
                <Title>Add Device</Title>
                <CallbackMethod>addDevice</CallbackMethod>
            </Field>
            <Field id="devices_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Published Devices:</Label>
                <List class="self" method="publishedDeviceList" dynamicReload="true"/>
            </Field>
            <Field id="devices_deleteDevices" type="button" visibleBindingId="section" visibleBindingValue="devices">
                <Label/>
                <Title>Delete Devices</Title>
                <CallbackMethod>deleteDevices</CallbackMethod>
            </Field>

            <!--  This section for managing variable broadcasts to this broker  -->

			<Field id="variables_variableSelected" type="menu" visibleBindingId="section" visibleBindingValue="variables">
				<Label>Variable to Publish:</Label>
				<List method="getVariables" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="variables_addVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Add Variable</Title>
                <CallbackMethod>addVariable</CallbackMethod>
            </Field>
            <Field id="variables_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="variables">
                <Label>Published Variables:</Label>
                <List class="self" method="publishedVariableList" dynamicReload="true"/>
            </Field>
            <Field id="variables_deleteVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Delete Variables</Title>
                <CallbackMethod>deleteVariables</CallbackMethod>
            </Field>

            <!--  This section for defining the format for device broadcasts to this broker  -->

            <Field id="device_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="device_template">
                <Label>See the Wiki for how to use this section.</Label>
            </Field>
            <Field id="device_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="device_template"/>
            <Field id="device_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue="indigo/devices/{{deviceId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="device_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue='{"name": "{{name}}", "deviceId": "{{deviceId}}","model": "{{model}}", "address": "{{address}}", "states": 
                    { {{#states}} "{{name}}": "{{value}}", {{/states}} } }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="device_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="device_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

            <!--  This section for defining the format for variable broadcasts to this broker  -->

            <Field id="variable_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="variable_template">
                <Label>See the Wiki for how to use this section. </Label>
            </Field>
            <Field id="variable_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="variable_template"/>
            <Field id="variable_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue="indigo/variables/{{variableId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="variable_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue='{ "name": {{name}}, "variableId":{{variableId}}, "value": {{value}} }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="variable_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="variable_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

        </ConfigUI> 
        
        <States>
            <State id="status">
                <ValueType>String</ValueType>
                <TriggerLabel>Status</TriggerLabel>
                <ControlPageLabel>Status</ControlPageLabel>
            </State>
            <State id="last_topic">
                <ValueType>String</ValueType>
                <TriggerLabel>Topic</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
            <State id="last_payload">
                <ValueType>String</ValueType>
                <TriggerLabel>Payload</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>status</UiDisplayStateId>
    </Device>
    
     <Device type="custom" id="dxlBroker">
        <Name>DXL Broker</Name>
        <ConfigUI>  
            <Field id="subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="old_subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="published_devices" type="list" hidden="true"><List class="self" method="publishedDeviceList"/></Field>
            <Field id="published_variables" type="list" hidden="true"><List class="self" method="publishedVariableList"/></Field>
           
            <Field id="section" type="menu" defaultValue="connect">
                <Label>Section:</Label>
        		<List>
        			<Option value="connect">Connection Info</Option>
        			<Option value="subscriptions">Topic Subscriptions</Option>
        			<Option value="devices">Published Devices</Option>
        			<Option value="device_template">Device Publishing Template</Option>
        			<Option value="variables">Published Variables</Option>
        			<Option value="variable_template">Variable Publishing Template</Option>
        		</List>
        	</Field>
            <Field id="section_separator1" type="separator"/>

            <!--  This section for connection and login information for the Broker/server  -->

            <Field id="address" type="textfield"  defaultValue="" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Broker IP Address or Hostname:</Label>
            </Field>
            <Field id="port" type="textfield" defaultValue="8883" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Port:</Label>
            </Field>
            <Field id="ca_bundle" type="textfield"  defaultValue="ca-bundle.crt" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Broker CA certificate file:</Label>
            </Field>
            <Field id="cert_file" type="textfield"  defaultValue="client.crt" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Client certificate file:</Label>
            </Field>
            <Field id="private_key" type="textfield"  defaultValue="client.key" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Client private key file:</Label>
            </Field>
            <Field id="brokerConnectLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Files must be located in the base Indigo directory.</Label>
            </Field>


            <!--  This section for managing topic subscriptions for this broker  -->

            <Field id="subscriptions_newTopic" type="textfield" visibleBindingId="section" visibleBindingValue="subscriptions" >
                <Label>Topic to subscribe:</Label>
            </Field>
            <Field id="subscriptions_addTopic" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Add Topic</Title>
                <CallbackMethod>addTopic</CallbackMethod>
            </Field>
            <Field id="subscriptions_separator1" type="separator" visibleBindingId="section" visibleBindingValue="subscriptions"/>
            <Field id="subscriptions_subscribedLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>This is the list of topics currently subscribed to for this broker.</Label>
            </Field>
           <Field id="subscriptions_items" type="list" rows="10" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>Subscribed Topics:</Label>
                <List class="self" method="subscribedList" dynamicReload="true"/>
            </Field>
            <Field id="subscriptions_deleteSubscriptions" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Delete Subscriptions</Title>
                <CallbackMethod>deleteSubscriptions</CallbackMethod>
            </Field>

            <!--  This section for managing device publishing to this broker  -->

            <Field id="devices_doExcludes" type="checkbox"  visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Exclude Devices</Label>
            </Field>
            <Field id="devices_excludeLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="devices">
                <Label>If checked the list of devices below will be excluded from publishing.  If not checked, ONLY the devices below will be published. </Label>
            </Field>
            <Field id="devices_separator1" type="separator" visibleBindingId="section" visibleBindingValue="devices"/>
            <Field id="deviceProtocol" type="menu" defaultValue="Insteon" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Select Plugin:</Label>
                <List method="getProtocolList" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
			<Field id="devices_deviceSelected" type="menu" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
				<Label>Device to Publish:</Label>
				<List method="getProtocolDevices" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="devices_addDevice" type="button" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label/>
                <Title>Add Device</Title>
                <CallbackMethod>addDevice</CallbackMethod>
            </Field>
            <Field id="devices_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Published Devices:</Label>
                <List class="self" method="publishedDeviceList" dynamicReload="true"/>
            </Field>
            <Field id="devices_deleteDevices" type="button" visibleBindingId="section" visibleBindingValue="devices">
                <Label/>
                <Title>Delete Devices</Title>
                <CallbackMethod>deleteDevices</CallbackMethod>
            </Field>

            <!--  This section for managing variable broadcasts to this broker  -->

			<Field id="variables_variableSelected" type="menu" visibleBindingId="section" visibleBindingValue="variables">
				<Label>Variable to Publish:</Label>
				<List method="getVariables" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="variables_addVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Add Variable</Title>
                <CallbackMethod>addVariable</CallbackMethod>
            </Field>
            <Field id="variables_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="variables">
                <Label>Published Variables:</Label>
                <List class="self" method="publishedVariableList" dynamicReload="true"/>
            </Field>
            <Field id="variables_deleteVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Delete Variables</Title>
                <CallbackMethod>deleteVariables</CallbackMethod>
            </Field>

            <!--  This section for defining the format for device broadcasts to this broker  -->

            <Field id="device_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="device_template">
                <Label>See the Wiki for how to use this section.</Label>
            </Field>
            <Field id="device_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="device_template"/>
            <Field id="device_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue="indigo/devices/{{deviceId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="device_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue='{"name": "{{name}}", "deviceId": "{{deviceId}}","model": "{{model}}", "address": "{{address}}", "states": 
                    { {{#states}} "{{name}}": "{{value}}", {{/states}} } }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="device_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="device_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

            <!--  This section for defining the format for variable broadcasts to this broker  -->

            <Field id="variable_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="variable_template">
                <Label>See the Wiki for how to use this section. </Label>
            </Field>
            <Field id="variable_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="variable_template"/>
            <Field id="variable_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue="indigo/variables/{{variableId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="variable_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue='{ "name": {{name}}, "variableId":{{variableId}}, "value": {{value}} }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="variable_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="variable_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

        </ConfigUI> 
        
        <States>
            <State id="status">
                <ValueType>String</ValueType>
                <TriggerLabel>Status</TriggerLabel>
                <ControlPageLabel>Status</ControlPageLabel>
            </State>
            <State id="last_topic">
                <ValueType>String</ValueType>
                <TriggerLabel>Topic</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
            <State id="last_payload">
                <ValueType>String</ValueType>
                <TriggerLabel>Payload</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>status</UiDisplayStateId>
    </Device>       

     <Device type="custom" id="aIoTBroker">
        <Name>Amazon IoT Broker</Name>
        <ConfigUI>  
            <Field id="subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="old_subscriptions" type="list" hidden="true"><List class="self" method="subscribedList"/></Field>
            <Field id="published_devices" type="list" hidden="true"><List class="self" method="publishedDeviceList"/></Field>
            <Field id="published_variables" type="list" hidden="true"><List class="self" method="publishedVariableList"/></Field>
           
            <Field id="section" type="menu" defaultValue="connect">
                <Label>Section:</Label>
        		<List>
        			<Option value="connect">Connection Info</Option>
        			<Option value="subscriptions">Topic Subscriptions</Option>
        			<Option value="devices">Published Devices</Option>
        			<Option value="device_template">Device Publishing Template</Option>
        			<Option value="variables">Published Variables</Option>
        			<Option value="variable_template">Variable Publishing Template</Option>
        		</List>
        	</Field>
            <Field id="section_separator1" type="separator"/>

            <!--  This section for connection and login information for the Broker/server  -->

            <Field id="address" type="textfield"  defaultValue="" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Endpoint:</Label>
            </Field>
            <Field id="port" type="textfield" defaultValue="8883" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Port:</Label>
            </Field>
            <Field id="ca_bundle" type="textfield"  defaultValue="ca-bundle.crt" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Root CA certificate file:</Label>
            </Field>
            <Field id="private_key" type="textfield"  defaultValue="client.key" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Private key file:</Label>
            </Field>
            <Field id="cert_file" type="textfield"  defaultValue="client.crt" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Certificate file:</Label>
            </Field>
            <Field id="brokerConnectLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="connect">
                <Label>Files must be located in the base Indigo directory.</Label>
            </Field>


            <!--  This section for managing topic subscriptions for this broker  -->

            <Field id="subscriptions_newTopic" type="textfield" visibleBindingId="section" visibleBindingValue="subscriptions" >
                <Label>Topic to subscribe:</Label>
            </Field>
        	<Field id="subscriptions_qos" type="menu" defaultValue="0" visibleBindingId="section" visibleBindingValue="subscriptions">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        		</List>
        	</Field>
            <Field id="subscriptions_addTopic" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Add Topic</Title>
                <CallbackMethod>addTopic</CallbackMethod>
            </Field>
            <Field id="subscriptions_separator1" type="separator" visibleBindingId="section" visibleBindingValue="subscriptions"/>
            <Field id="subscriptions_subscribedLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>This is the list of topics currently subscribed to for this broker.</Label>
            </Field>
           <Field id="subscriptions_items" type="list" rows="10" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label>Subscribed Topics:</Label>
                <List class="self" method="subscribedList" dynamicReload="true"/>
            </Field>
            <Field id="subscriptions_deleteSubscriptions" type="button" visibleBindingId="section" visibleBindingValue="subscriptions">
                <Label/>
                <Title>Delete Subscriptions</Title>
                <CallbackMethod>deleteSubscriptions</CallbackMethod>
            </Field>

            <!--  This section for managing device publishing to this broker  -->

            <Field id="devices_doExcludes" type="checkbox"  visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Exclude Devices</Label>
            </Field>
            <Field id="devices_excludeLabel" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="devices">
                <Label>If checked the list of devices below will be excluded from publishing.  If not checked, ONLY the devices below will be published. </Label>
            </Field>
            <Field id="devices_separator1" type="separator" visibleBindingId="section" visibleBindingValue="devices"/>
            <Field id="deviceProtocol" type="menu" defaultValue="Insteon" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Select Plugin:</Label>
                <List method="getProtocolList" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
            </Field>
			<Field id="devices_deviceSelected" type="menu" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
				<Label>Device to Publish:</Label>
				<List method="getProtocolDevices" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="devices_addDevice" type="button" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label/>
                <Title>Add Device</Title>
                <CallbackMethod>addDevice</CallbackMethod>
            </Field>
            <Field id="devices_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="devices" alwaysUseInDialogHeightCalc="true">
                <Label>Published Devices:</Label>
                <List class="self" method="publishedDeviceList" dynamicReload="true"/>
            </Field>
            <Field id="devices_deleteDevices" type="button" visibleBindingId="section" visibleBindingValue="devices">
                <Label/>
                <Title>Delete Devices</Title>
                <CallbackMethod>deleteDevices</CallbackMethod>
            </Field>

            <!--  This section for managing variable broadcasts to this broker  -->

			<Field id="variables_variableSelected" type="menu" visibleBindingId="section" visibleBindingValue="variables">
				<Label>Variable to Publish:</Label>
				<List method="getVariables" dynamicReload="true" class="self" filter="" />
                <CallbackMethod>menuChanged</CallbackMethod>
			</Field>
            <Field id="variables_addVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Add Variable</Title>
                <CallbackMethod>addVariable</CallbackMethod>
            </Field>
            <Field id="variables_list" type="list" rows="15" visibleBindingId="section" visibleBindingValue="variables">
                <Label>Published Variables:</Label>
                <List class="self" method="publishedVariableList" dynamicReload="true"/>
            </Field>
            <Field id="variables_deleteVariable" type="button" visibleBindingId="section" visibleBindingValue="variables">
                <Label/>
                <Title>Delete Variables</Title>
                <CallbackMethod>deleteVariables</CallbackMethod>
            </Field>

            <!--  This section for defining the format for device broadcasts to this broker  -->

            <Field id="device_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="device_template">
                <Label>See the Wiki for how to use this section.</Label>
            </Field>
            <Field id="device_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="device_template"/>
            <Field id="device_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue="indigo/devices/{{deviceId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="device_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="device_template"
                defaultValue='{"name": "{{name}}", "deviceId": "{{deviceId}}","model": "{{model}}", "address": "{{address}}", "states": 
                    { {{#states}} "{{name}}": "{{value}}", {{/states}} } }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="device_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="device_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="device_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

            <!--  This section for defining the format for variable broadcasts to this broker  -->

            <Field id="variable_template_label" type="label" fontColor="darkgray" visibleBindingId="section" visibleBindingValue="variable_template">
                <Label>See the Wiki for how to use this section. </Label>
            </Field>
            <Field id="variable_template_separator1" type="separator" visibleBindingId="section" visibleBindingValue="variable_template"/>
            <Field id="variable_template_topic" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue="indigo/variables/{{variableId}}/update">
                <Label>Topic:
                </Label>
            </Field>
            <Field id="variable_template_payload" type="textfield"  visibleBindingId="section" visibleBindingValue="variable_template"
                defaultValue='{ "name": {{name}}, "variableId":{{variableId}}, "value": {{value}} }'>
                <Label>Payload:
                
                
                
                
                
                
                
                
                
                
                </Label>
            </Field>
        	<Field id="variable_template_qos" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>QoS Level:</Label>
        		<List>
        			<Option value="0">0</Option>
        			<Option value="1">1</Option>
        			<Option value="2">2</Option>
        		</List>
        	</Field>
        	<Field id="variable_template_retain" type="menu" defaultValue="0"  visibleBindingId="section" visibleBindingValue="variable_template">
        		<Label>Retain:</Label>
        		<List>
        			<Option value="0">False</Option>
        			<Option value="1">True</Option>
        		</List>
        	</Field>

        </ConfigUI> 
        
        <States>
            <State id="status">
                <ValueType>String</ValueType>
                <TriggerLabel>Status</TriggerLabel>
                <ControlPageLabel>Status</ControlPageLabel>
            </State>
            <State id="last_topic">
                <ValueType>String</ValueType>
                <TriggerLabel>Topic</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
            <State id="last_payload">
                <ValueType>String</ValueType>
                <TriggerLabel>Payload</TriggerLabel>
                <ControlPageLabel>Topic</ControlPageLabel>
            </State>
        </States>
        <UiDisplayStateId>status</UiDisplayStateId>
    </Device>       
</Devices>
